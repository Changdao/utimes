<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
        "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans>

    <!-- this bean with the well known name generates view names for us -->
    <bean id="viewNameTranslator" class="org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator"/>

    <bean id="messageSource"
          class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="utimes" />
    </bean>

    <!--
    <property name="basename" >
            <list>
                <value>classpath:message</value>
                <value>classpath:utimes</value>
            </list>
        </property>
    -->


    <bean name="/register.htm" class="com.utimes.study.web.UserController">
	    <property name="userService" ref="userService"/>
	    <property name="formView" value="signup"/>
	    <property name="successView" value="signedup"/>

        <property name="validator">
            <bean class="com.utimes.study.validator.UserValidator" />
        </property>
    </bean> 
    
    <bean name="/myprofile.htm" class="com.utimes.study.web.ProfileController">
    	<property name="userService" ref="userService"/>    	
    </bean>
    
    <bean name="/myutimes.htm" class="com.utimes.study.web.MyUtimesController">
    	<property name="loginView" value="login"/>
    	<property name="successView" value="myutimes"/>
    </bean>
    <bean name="/login.htm" class="com.utimes.study.web.LoginController">
    	<property name="userService" ref="userService"/>
    </bean>
    
    <bean name="/rows.htm" class="com.utimes.study.web.SchoolController">
    	<property name="schoolService" ref="schoolService"/>
    </bean>

    <!--bean name="/register.htm" class="com.utimes.study.web.RegisterController">
        <property name="registerService" ref="registerService"/>
    </bean-->
    
    <bean name="/admin/users.htm" class="com.utimes.study.web.admin.UserController">
    	<property name="userService" ref="userService"/>
    	<property name="countPerPage" value="30"/>
    </bean>
    
    <bean name="/admin/schools.htm" class="com.utimes.study.web.admin.SchoolController">
    	<property name="schoolService" ref="schoolService"/>
    	<!-- property name="countPerPage" value="30"/ -->
    </bean>
    <bean name="/admin/createschool.htm" class="com.utimes.study.web.admin.SchoolCreationController">
        <property name="schoolService" ref="schoolService"/>
    </bean>
    
    <!-- maps request URLs to Controller names -->
    <!-- bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/ -->

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
    </bean>
	<bean class="org.springframework.beans.factory.config.CustomEditorConfigurer">
		<property name="customEditors">
		<map>
			<entry key="com.utimes.study.bean.EmailAddress">
				<bean id="emailEditor" class="com.utimes.study.bean.EmailAddressEditor"></bean>
			</entry>
		</map>
		</property>
		
	</bean>
</beans>
